<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Friend Requests UI</title>
  <style>
    /* Container for the horizontal scrollable list */
    .horizontal-list {
      display: flex;
      flex-direction: row;
      gap: 8px;
      overflow-x: auto;
      padding: 8px;
      margin: 0;
      list-style: none;
      background-color: #f9f9f9;
      border: 1px solid #ccc;
      max-width: 100%;
    }

    /* Individual friend item box */
    .friend-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100px;
      padding: 6px;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 6px;
      background-color: white;
      flex-shrink: 0;
    }

    .friend-item img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
    }

    .friend-name-tag {
      margin-top: 4px;
      font-size: 0.8em;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }

    .friend-buttons {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 2px;
      margin-top: 4px;
    }

    .friend-buttons button {
      font-size: 0.7em;
      padding: 2px 4px;
      width: 100%;
      box-sizing: border-box;
      background-color: #eee;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .friend-buttons button:hover {
      background-color: #ccc;
    }
  </style>
</head>
<body>

<ul id="outgoing-requests" class="horizontal-list"></ul>

<script>
  const DEBUGPRINTS = true;

  function acceptRequest(id) {
    alert("Accepted ID: " + id);
  }

  function declineRequest(id) {
    alert("Declined ID: " + id);
  }

  function populateOutRequest(list_name, data) {
    const friendList = document.getElementById(list_name);
    friendList.innerHTML = ""; // Clear existing content

    if (data == null || !data.sent_requests?.length) return;

    data.sent_requests.forEach(friend => {
      const li = document.createElement('li');
      li.classList.add('friend-item');

      const img = document.createElement('img');
      img.src = friend.img || "./media/default.jpeg";
      img.alt = friend.from_user;

      const nameTag = document.createElement('span');
      nameTag.textContent = friend.from_user;
      nameTag.classList.add('friend-name-tag');

      const buttonContainer = document.createElement('div');
      buttonContainer.classList.add('friend-buttons');

      const acceptBtn = document.createElement('button');
      acceptBtn.textContent = 'Accept';
      acceptBtn.addEventListener('click', () => acceptRequest(friend.id));

      const declineBtn = document.createElement('button');
      declineBtn.textContent = 'Decline';
      declineBtn.addEventListener('click', () => declineRequest(friend.id));

      buttonContainer.appendChild(acceptBtn);
      buttonContainer.appendChild(declineBtn);

      li.appendChild(img);
      li.appendChild(nameTag);
      li.appendChild(buttonContainer);
      friendList.appendChild(li);
    });
  }

  // Test Data
  const mockData = {
    sent_requests: [
      { id: 1, from_user: "Alice Wonderland", img: "" },
      { id: 2, from_user: "Bob Builder", img: "" },
      { id: 3, from_user: "Charlie Chocolate", img: "" },
      { id: 4, from_user: "Diana Dreamer", img: "" },
      { id: 5, from_user: "Eve Explorer", img: "" },
    ]
  };

  // Simulate population
  window.onload = () => {
    populateOutRequest("outgoing-requests", mockData);
  };
</script>

</body>
</html>
